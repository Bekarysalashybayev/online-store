{% extends "delivery/layouts/base.html" %}

{% block title %} UI Tables {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    <style>
        .myorders:hover{
            color: green!important;
        }
        #map {
          height: 400px;
          width: 100%;
        }
    </style>
{% endblock stylesheets %}

{% block content %}

        <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title "><a class="myorders" href="{% url 'myorders' %}" style=""><b>Мои заказы</b></a> / Следить</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                  <div class="row">
                      <div class="col-md-4">
                          <h5><b>Данные заказа</b></h5>
                            <hr>
                            <p class="order"><b>Адрес:</b> {{ order.address1 }}, {{ order.address2 }}</p>
                            <p class="order"><b>Номер телефона:</b> {{ order.phone }}</p>
                            <p class="order"><b>Сумма заказа:</b> {{ order.total }} тнг</p>
                            <p class="order"><b>Статус заказа:</b> {{ order.status }}</p>
                            <hr>
                            <h5><b>Клиент</b></h5>
                            <hr>
                            <p class="order"><b>Имя:</b> {{ order.user.name }} {{ order.user.surname }}</p>
                            <p class="order"><b>Контактные данные:</b>  <a href="tel:{{ order.user.phone }}">{{ order.user.phone }}</a></p>
                            <hr>
                      </div>
                      <div class="col-md-7">
                            <div style="display: block">
                                <p id="lat">{{ order.lat }}</p>
                                <p id="lng">{{ order.lng }}</p>
                            </div>
                           <div id="map">

                           </div>
                      </div>
                  </div>

                    <br>
                    <h5><b>Товары</b></h5>
                    <br>
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th>Название</th>
                        <th>Цена</th>
                        <th>Количество</th>
                        <th>Сумма</th>
                      </tr>
                    </thead>
                    <tbody>
                    {% for l in list %}
                      <tr>
                        <td>{{ l.product.name }}</td>
                        <td>{{ l.price }}</td>
                        <td>{{ l.count }} </td>
                        <td>{{ l.total_price }}тнг</td>
                      </tr>
                    {% endfor %}
                    </tbody>
                  </table>
                  </div>
                </div>
              </div>
            </div>
        </div>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script>
        let map;
        let lat = document.getElementById('lat').innerHTML;
        let lng = document.getElementById('lng').innerHTML;
        let myLatlng = {
            lat: parseFloat(lat),
            lng: parseFloat(lng),
          };
        function initMap() {
          map = new google.maps.Map(document.getElementById("map"), {
            center: myLatlng,
            zoom: 8,
          });
          marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            draggable: true
          });
        }

    </script>
     <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAq_zq8oIH5flWJZ3Vb0uAjZDxZPTFjdI8&callback=initMap&libraries=&v=weekly"
      async
    ></script>
{% endblock %}
